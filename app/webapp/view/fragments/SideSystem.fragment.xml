<core:FragmentDefinition xmlns:core="sap.ui.core" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:t="sap.ui.table" 
    xmlns:l="sap.ui.layout" 
    xmlns:f="sap.ui.layout.form" 
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <t:Table id="tabSystemList" selectionMode="MultiToggle" enableSelectAll="false" alternateRowColors="true" visibleRowCountMode="Auto" enableBusyIndicator="true" rows="{            
            path: 'management>/SCI_MST_SYSTEMLIST_SRV',
            parameters: {
                $count: true,                
                $$updateGroupId: 'filesDataGroup',
                $expand: 'COMPANY_CD,SUBSIDARY_CD,APPPLTYPE_CD,HISTORY'
            },
            events: {
                dataReceived : '.onDR_SystemList'
            }
        }" rowSelectionChange="onPAI" app:fcCode="fcSelectionChangeSystemList">
        <t:extension>
            <OverflowToolbar>
                <Title text="{i18n>tlTotalCount} { 
                    path: 'mainView>/SystemList/totalCount',
                    type: 'sap.ui.model.odata.type.Int32'}" wrapping="false" />
                <Title text=" / {i18n>tlSelectedCount} { path: 'mainView>/SystemList/selectedCount', type: 'sap.ui.model.odata.type.Int32' }" />
                <Button type="Transparent" icon="sap-icon://refresh" press="onPAI" app:fcCode="fcRefreshSystem" />
                <ToolbarSpacer/>
                <Button text="{i18n>btnCreate}" icon="sap-icon://create" press="onPAI" app:fcCode="fcCreateSystem"/>
                <Button text="{i18n>btnDelete}" icon="sap-icon://delete" type="Reject" enabled="{= ${mainView>/SystemList/selectedCount} > 0 ? true : false}" press="onPAI" app:fcCode="fcDeleteSystem"/>
            </OverflowToolbar>
        </t:extension>
        <t:columns>
            <!-- Company Name : 회사 -->
            <t:Column width="8rem"
                autoResizable="true"
                sortProperty="COMPANY_CODE"
                filterProperty="COMPANY_CODE"
                hAlign="Center">
                <Label text="{i18n>fldCompanyCd}"
                    textAlign="Center"
                    width="100%"/>
                <t:template>
                    <Text text="{management>COMPANY_DESC01}"
                        textAlign="Center"
                        width="100%"
                        wrapping="false"/>
                </t:template>
            </t:Column>

            <!-- Subsidary Company : 자회사 -->
            <t:Column width="8rem"
                autoResizable="true"
                sortProperty="SUBSIDARY_CODE"
                filterProperty="SUBSIDARY_CODE"
                hAlign="Center">
                <Label text="{i18n>fldSubsidaryCd}"
                    textAlign="Center"
                    width="100%"/>
                <t:template>
                    <HBox justifyContent="Center">
                        <Button icon="sap-icon://history" press="onPAI" app:fcCode="fcViewHistoryFile" app:keyData="{mesData>ID}" />
                        <Button icon="sap-icon://document-text" press="onPAI" app:fcCode="fcFileContentsLog" app:keyData="{mesData>ID}" />
                    </HBox>
                </t:template>
            </t:Column>

            <!-- Application Type : 어플리케이션 유형 코드 -->
            <t:Column sortProperty="APPLTYPE_CODE"
                filterProperty="APPLTYPE_CODE"
                hAlign="Center"
                width="12rem"
                autoResizable="true">
                <Label text="{i18n>fldApplTypeCd}"/>
                <t:template>
                    <Text text="{management>SYSTEM_NM}"/>
                </t:template>
            </t:Column>

            <!-- Application Name : 어픨리케이션 이름 -->
            <t:Column sortProperty="APPL_NM" filterProperty="APPL_NM" hAlign="Center" width="12rem" autoResizable="true">
                <Label text="{i18n>fldApplNm}"/>
                <t:template>
                    <Text text="{mesData>postingDate}"/>
                </t:template>
            </t:Column>

            <!-- Application Type : 어플리케이션 유형 코드 -->
            <t:Column sortProperty="APPPLTYPE_CD/CODE" filterProperty="APPPLTYPE_CD/CODE" hAlign="Center" width="20rem" autoResizable="true">
                <Label text="{i18n>fldApplTypeCd}"/>
                <t:template>
                    <Text text="{management>APPPLTYPE_CD/DESC01}"/>
                </t:template>
            </t:Column>

            <!-- Deleted :  삭제여부 -->
            <t:Column sortProperty="DELETED_TF" filterProperty="DELETED_TF" hAlign="Center" width="10rem" autoResizable="true">
                <Label text="{i18n>fldDeletedIf}"/>
                <t:template>
                    <Text text="{management>DELETED_TF}"/>
                </t:template>
            </t:Column>

            <!-- Created Dt : 생성날짜 -->
            <t:Column sortProperty="createdAt" filterProperty="createdAt" hAlign="Center" width="20rem" autoResizable="true">
                <Label text="{i18n>fldCreatedAt}"/>
                <t:template>
                    <Text text="{mesData>itemCount}"/>
                </t:template>
            </t:Column>

            <!-- Created By : 생성자 -->
            <t:Column sortProperty="createdBy" filterProperty="createdBy" hAlign="Center" width="10rem" autoResizable="true">
                <Label text="{i18n>fldCreatedBy}"/>
                <t:template>
                    <Text text="{mesData>movementCount}"/>
                </t:template>
            </t:Column>
            <!-- Modifed Dt : 수정날짜 -->
            <t:Column sortProperty="modifiedAt" filterProperty="modifiedAt" hAlign="Center" width="20rem" autoResizable="true">
                <Label text="{i18n>fldModifiedAt}"/>
                <t:template>
                    <Text text="{mesData>confirmationCount}"/>
                </t:template>
            </t:Column>

            <!-- Modified By : 수정자 -->
            <t:Column sortProperty="modifiedBy" filterProperty="modifiedBy" hAlign="Center" width="12rem" autoResizable="true">
                <Label text="{i18n>fldModifiedBy}"/>
                <t:template>
                    <Text text="{mesData>lastExecutedDate}"/>
                </t:template>
            </t:Column>
        </t:columns>
        <t:footer>
        </t:footer>
    </t:Table>
</core:FragmentDefinition>